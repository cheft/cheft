!function t(e,n,i){function r(a,s){if(!n[a]){if(!e[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[a]={exports:{}};e[a][0].call(l.exports,function(t){var n=e[a][1][t];return r(n?n:t)},l,l.exports,t,e,n,i)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(t,e,n){var i=t("riot");e.exports=i.tag("breadcrumb",'<section class="content-header"><h1> {opts.name} <small>Control panel</small></h1><ol class="breadcrumb"><li><i class="fa fa-dashboard"></i> Home</li><li class="active">{opts.name}</li></ol></section>',function(t){})},{riot:21}],2:[function(t,e,n){var i=t("riot");e.exports=i.tag("dashboard",'<breadcrumb name="Dashboard"></breadcrumb>  <section class="content">  <div class="row"><div class="col-lg-3 col-xs-6">  <div class="small-box bg-aqua"><div class="inner"><h3>150</h3><p>New Orders</p></div><div class="icon"><i class="ion ion-bag"></i></div><a href="#" class="small-box-footer">More info <i class="fa fa-arrow-circle-right"></i></a></div></div><div class="col-lg-3 col-xs-6">  <div class="small-box bg-green"><div class="inner"><h3>53<sup style="font-size: 20px">%</sup></h3><p>Bounce Rate</p></div><div class="icon"><i class="ion ion-stats-bars"></i></div><a href="#" class="small-box-footer">More info <i class="fa fa-arrow-circle-right"></i></a></div></div><div class="col-lg-3 col-xs-6">  <div class="small-box bg-yellow"><div class="inner"><h3>44</h3><p>User Registrations</p></div><div class="icon"><i class="ion ion-person-add"></i></div><a href="#" class="small-box-footer">More info <i class="fa fa-arrow-circle-right"></i></a></div></div><div class="col-lg-3 col-xs-6">  <div class="small-box bg-red"><div class="inner"><h3>65</h3><p>Unique Visitors</p></div><div class="icon"><i class="ion ion-pie-graph"></i></div><a href="#" class="small-box-footer">More info <i class="fa fa-arrow-circle-right"></i></a></div></div></div></section>',function(t){})},{riot:21}],3:[function(t,e,n){var i=t("riot");e.exports=i.tag("login",'<div class="login-box"><div class="login-logo"><a><b>Echo</b>Box</a></div><div class="login-box-body"><p class="login-box-msg">Sign in to start your session</p><div class="form-group has-feedback"><input type="text" class="form-control" placeholder="Username" name="username" onkeypress="{enter}"><span class="glyphicon glyphicon-user form-control-feedback"></span></div><div class="form-group has-feedback"><input type="password" class="form-control" placeholder="Password" name="password" onkeypress="{enter}"><span class="glyphicon glyphicon-lock form-control-feedback"></span></div><div class="row"><div class="col-xs-8"></div><div class="col-xs-4"><button type="button" class="btn btn-primary btn-block btn-flat" onclick="{submit}">Sign In</button></div></div></div></div>',function(e){app.mixin(this,t("./mixin"))})},{"./mixin":10,riot:21}],4:[function(t,e,n){var i=t("riot");e.exports=i.tag("message-detail",'<breadcrumb name="Message Detail"></breadcrumb><div class="box"><div class="box-header with-border"><h3 class="box-title"><a href="javascript:void(0);" onclick="{app.back}"><i class="fa fa-fw fa-chevron-left"></i> Back</a></h3></div><div class="box-body"><div class="form-group"><label>Date</label><div>{new Date(message.createdAt).toLocaleString()}</div></div><div class="form-group"><label>Name</label><div>{message.name}</div></div><div class="form-group"><label>Email</label><div>{message.email}</div></div><div class="form-group"><label>Subject</label><div>{message.subject}</div></div><div class="form-group"><label>Message</label><div>{message.message}</div></div></div></div>',function(e){app.mixin(this,t("./mixin"))})},{"./mixin":11,riot:21}],5:[function(t,e,n){var i=t("riot");e.exports=i.tag("messages",'<breadcrumb name="Messages"></breadcrumb><div class="content box"><div class="box-header"><h3 class="box-title">Show Message</h3><div class="box-tools"><ul class="pagination pagination-sm no-margin pull-right"><li><a href="javascript:void(0);" onclick="{prev}">&laquo;</a></li><li><a href="javascript:void(0);">{page} / {pages}</a></li><li><a href="javascript:void(0);" onclick="{next}">&raquo;</a></li></ul></div></div><div class="box-body table-responsive no-padding"><table class="table table-hover"><tr><th>Date</th><th>Name</th><th>Email</th><th>Subject</th><th>Message</th><th>Detail{app.config.apiPrefix}</th></tr><tr each="{messages}"><td>{new Date(createdAt).toLocaleString()}</td><td>{name}</td><td>{email}</td><td>{subject}</td><td>{message.substr(0, 20)}...</td><td><a href="/messages/{id}" onclick="{app.holdLink}" class="fa fa-fw fa-eye" data-toggle="tooltip" title="View"></a></td></tr></table></div></div>',function(e){app.mixin(this,t("./mixin"))})},{"./mixin":12,riot:21}],6:[function(t,e,n){var i=t("riot");e.exports=i.tag("new-detail",'<breadcrumb name="News Detail"></breadcrumb><div class="box"><div class="box-header with-border"><h3 class="box-title"><a href="javascript:void(0);" onclick="{app.back}"><i class="fa fa-fw fa-chevron-left"></i> Back</a></h3><div class="box-tools pull-right" if="{news.id}"><button class="btn btn-box-tool" data-toggle="tooltip" title="Toggle" onclick="{edit}"><i class="fa fa-fw {isEdit ? \'fa-eye\' : \'fa-edit\'}"></i></button><button if="{news.status === \'unpublish\'}" class="btn btn-box-tool" data-toggle="tooltip" title="Publish" onclick="{publish}"><i class="fa fa-fw fa-share"></i></button><button if="{news.status === \'publish\'}" class="btn btn-box-tool" data-toggle="tooltip" title="Unpublish" onclick="{unpublish}"><i class="fa fa-fw fa-history"></i></button><button class="btn btn-box-tool" data-toggle="tooltip" title="Destory" onclick="{remove}"><i class="fa fa-fw fa-trash"></i></button></div></div><form name="news_form" role="form" enctype="multipart/form-data" ><div class="box-body"><div class="alert alert-danger" if="{errorMsg}"><h4><i class="icon fa fa-ban"></i> Alert!</h4><raw content="{errorMsg}"></raw></div><div class="form-group"><input type="hidden" name="id" value="{news.id}"><label for="cover{_id}">Cover</label><div if="{!isEdit}"><img class="img-responsive" riot-src="{coverPath ? coverPath : \'\'}"></div><input if="{isEdit}" name="cover" type="file" id="cover{_id}"><p if="{isEdit}" class="help-block">600 x 300</p></div><div class="form-group"><label for="subject{_id}">Subject</label><div if="{!isEdit}">{news.subject}</div><textarea if="{isEdit}" name="subject" id="subject{_id}" class="form-control" rows="3" placeholder="Enter Subject">{news.subject}</textarea></div><div class="form-group"><label for="content{_id}">Content</label><div if="{!isEdit}">{news.content}</div><textarea if="{isEdit}" name="content" id="content{_id}" class="form-control" rows="6" placeholder="Enter Content">{news.content}</textarea></div></div><div class="box-footer"><button if="{isEdit}" type="button" class="btn btn-primary" onclick="{save}">Save</button></div></form></div>',function(e){app.mixin(this,t("./mixin"))})},{"./mixin":13,riot:21}],7:[function(t,e,n){var i=t("riot");e.exports=i.tag("news",'<breadcrumb name="News"></breadcrumb><div class="content box"><div class="box-header"><div class="box-title"><button class="btn btn-sm btn-success" data-toggle="tooltip" title="Create" onclick="{create}"><i class="fa fa-fw fa-plus"></i></button></div><div class="box-tools"><ul class="pagination pagination-sm no-margin pull-right"><li><a href="javascript:void(0);" onclick="{prev}">&laquo;</a></li><li><a href="javascript:void(0);">{page} / {pages}</a></li><li><a href="javascript:void(0);" onclick="{next}">&raquo;</a></li></ul></div></div><div class="box-body table-responsive no-padding"><table class="table table-hover"><tr><th>Date</th><th>Subject</th><th>Content</th><th>Status</th><th>Detail</th></tr><tr each="{messages}"><td>{new Date(createdAt).toLocaleString()}</td><td>{subject.substr(0, 50)}</td><td>{content.substr(0, 20)}...</td><td><span if="{status === \'publish\'}" class="label label-success">Published</span><span if="{status === \'unpublish\'}" class="label label-primary">Not Publish</span></td><td><a href="/news/{id}" onclick="{app.holdLink}" class="fa fa-fw fa-eye" data-toggle="tooltip" title="View"></a></td></tr></table></div></div>',function(e){app.mixin(this,t("./mixin"))})},{"./mixin":14,riot:21}],8:[function(t,e,n){var i=t("riot");e.exports=i.tag("raw","",function(t){this.on("update",function(){this.opts.content&&(this.root.innerHTML=this.opts.content)})})},{riot:21}],9:[function(t,e,n){var i=t("riot"),r=t("./lib/client"),o=t("./config"),a=t("./app/router"),s=window.app=r(o,a);s.config=o;var c=function(t){var e=document.querySelector(".sidebar-menu li.active");e&&(e.className="");var n=document.querySelector('.sidebar-menu a[href="/'+t+'"]');n&&(n.parentNode.className="active")};s.render=function(t,e){if(void 0===t||"undefined"===t)t=e.params[0];else if(-1!==t.indexOf("/")){var n=t.split("/");t=n[n.length-1]}var r=document.getElementById("app");0===r.getElementsByTagName(t).length&&r.setAttribute("riot-tag",t),i.mount(t,e),c(t)},s.holdLink=function(t){var e;"a"!==t.target.localName&&(e=t.target.parentNode.pathname),s.router.hold(t,e)},s.back=function(t){s.router.back()},s.start()},{"./app/router":15,"./config":16,"./lib/client":18,riot:21}],10:[function(t,e,n){e.exports={"do":{submit:function(){var t={username:this.username.value,password:this.password.value};app.rest.post("/login",t,function(t){return"error"===t.status?alert("username or password error"):void(location.href="/")})},enter:function(t){return 13==t.keyCode&&this.submit(),!0}}}},{}],11:[function(t,e,n){e.exports={on:{init:function(){this.trigger("initData")},initData:function(){var t=this;t.done="message.done",app.rest.get("/messages/"+t.opts.params[0],function(e){t.message=e,t.update(),app.trigger("message.done")})}}}},{}],12:[function(t,e,n){e.exports={on:{init:function(){this.trigger("initData")},initData:function(){var t=this;t.done="messages.done",t.page=t.page||1,app.rest.get("/messages/count",function(e){var n=e?e.count:0;t.pages=n%app.config.pageSize===0?n/app.config.pageSize:parseInt(n/app.config.pageSize)+1,t.update()}),app.rest.get("/messages?page="+t.page,function(e){t.messages=e,t.update(),app.trigger("messages.done")})}},"do":{prev:function(){this.page<=1||(this.page=this.page-1,this.trigger("initData"))},next:function(){this.page>=this.pages||(this.page=this.page+1,this.trigger("initData"))}}}},{}],13:[function(t,e,n){var i=t("../../lib/rest");e.exports={on:{init:function(){this.trigger("initData")},update:function(){this.news&&this.news.cover&&(this.coverPath=app.config.uploadAccess+"/"+this.news.timestamp+"/"+this.news.cover)},initData:function(){var t=this;return"create"===t.opts.params[0]?(t.isEdit=!0,t.news={},void t.update()):(t.done="new.done",void app.rest.get("/news/"+t.opts.params[0],function(e){t.news=e,t.update(),app.trigger("new.done")}))}},"do":{edit:function(){this.isEdit=!this.isEdit},remove:function(){var t=confirm("Are you ABSOLUTELY sure?");t&&app.rest.del("/news/"+this.news.id,function(t){app.router.back()})},save:function(){var t="";if(""===this.id.value&&""===this["cover{_id}"].value&&(t+="cover required.<br />"),""!==this["cover{_id}"].value){var e=this["cover{_id}"].value,n=e.substr(e.lastIndexOf("."),e.length);".png"!==n&&".jpg"!==n&&".jepg"!==n&&(t+="cover only support jpg/png image.<br />")}if(""===this["subject{_id}"].value&&(t+="subject required.<br />"),""===this["content{_id}"].value&&(t+="content required.<br />"),""!==t)return this.errorMsg=t,!0;var r=new FormData(this.news_form),o=i({apiRoot:app.config.apiRoot,contentType:!1,processData:!1});o.post("/news",r,function(t){app.router.back()})},publish:function(){var t=this;app.rest.put("/news/"+this.id.value+"/publish",function(e){e.error?(console.log(e.error),t.errorMsg=e.error,t.update()):app.router.back()})},unpublish:function(){app.rest.put("/news/"+this.id.value+"/unpublish",function(t){app.router.back()})}}}},{"../../lib/rest":19}],14:[function(t,e,n){e.exports={on:{init:function(){this.trigger("initData")},initData:function(t){var e=this;e.done="news.done",e.page=e.page||1,app.rest.get("/news/count",function(t){var n=t?t.count:0;e.pages=n%app.config.pageSize===0?n/app.config.pageSize:parseInt(n/app.config.pageSize)+1,e.update()}),app.rest.get("/news?page="+e.page,function(t){e.messages=t,e.update(),app.trigger("news.done")})}},"do":{create:function(){app.router.go("/news/create")},prev:function(){this.page<=1||(this.page=this.page-1,this.trigger("initData"))},next:function(){this.page>=this.pages||(this.page=this.page+1,this.trigger("initData"))}}}},{}],15:[function(t,e,n){e.exports=function(t){t.get("/",function(t,e){return e.render("messages")}),t.get("/login",function(t,e){return e.render("login",{template:"login.html"})}),t.get("/messages/:id",function(t,e){return e.render("message-detail",{params:[t.params.id]})}),t.get("/news/:id",function(t,e){return e.render("new-detail",{params:[t.params.id]})}),t.get("/:tagName",function(t,e){return e.render(t.params.tagName,{params:[t.params.tagName]})})}},{}],16:[function(t,e,n){(function(t){e.exports={apiPrefix:"/api",apiRoot:"http://echoboxd.coding.io/api",dirname:t,pageSize:10,uploadDir:t+"/public/upload",uploadAccess:"/upload"}}).call(this,"/")},{}],17:[function(t,e,n){var r,o,a,s,c=t("riot"),u=[].slice;for(r=o={version:"0.0.1"},a=Object.prototype.toString,s=["Function","Object","String","Array","Number","Boolean","Date","RegExp","Undefined","Null"],fn=function(t){return r["is"+t]=function(e){return a.call(e)==="[object "+t+"]"}},i=0,len=s.length;i<len;i++)item=s[i],fn(item);r.extend=function(){var t,e,n,i,r,o,a;if(o=arguments[0],r=2<=arguments.length?u.call(arguments,1):[],!o)return o;for(t=0,n=r.length;n>t;t++){i=r[t];for(e in i)a=i[e],o[e]=a}return o},r.isServer=function(){return"object"!=typeof window},r.isClient=function(){return"object"==typeof window},r.observable=function(t){c.observable(t),t.chain=function(e,n){var i={},r=0;e.replace(/\S+/g,function(t,e){i[t]=!0,r++}),t.on("all",function(e){e in i&&r--,0>=r&&(t.off("all"),n.apply(t))})}},e.exports=r},{riot:21}],18:[function(t,e,n){var i=t("minrouter"),r=t("./cheft"),o=t("./rest");e.exports=function(t,e,n){var a={},s={rest:o(t),get:function(t,e){var n={params:{}},i={render:function(e,n){a[t]=function(){n=n||{},arguments&&(n.params=[].slice.apply(arguments)),s.render(e,n)}},sendfile:function(t){console.log(t)}};e(n,i)},start:function(){window.onload=function(){e(s),s.router=new i({routes:a,links:n}),s.router.start()}}};return s=r.extend(s,r),r.observable(s),s.mixin=function(t,e){var n,i,r;if(i=function(){},e.on){i=e.on.init||function(){},n=function(n){return t.on(n,e.on[n])};for(r in e.on)n(r)}e["do"]=e["do"]||{},e["do"].init=i,t.mixin(e["do"])},s}},{"./cheft":17,"./rest":19,minrouter:20}],19:[function(t,e,n){var i=t("superagent");e.exports=function(t){if(!t.apiRoot)throw"must apiRoot";var e=void 0===t.contentType?"application/x-www-form-urlencoded":t.contentType,n=void 0===t.processData?!0:t.processData,r=function(r,o,a,s){void 0===s&&(s=a,a={});var c=i[r](t.apiRoot+o).send(a);e&&(c=c.set("Content-Type",e)),c.set("Process-Data",n).end(function(t,e){return s(e?e.body:{},t)})};return{get:function(t,e,n){r("get",t,e,n)},post:function(t,e,n){r("post",t,e,n)},put:function(t,e,n){r("put",t,e,n)},del:function(t,e,n){r("del",t,e,n)}}}},{superagent:22}],20:[function(t,e,n){!function(){function t(t){this.opts=t,this.routes=t.routes,this.sep=t.sep||"",this.go(location.pathname,!0),this.holdLinks(t.links||[]),a=this}if(window){var i=window,r="pushState"in history,o=r?"popstate":"hashchange",a={},s=[/[\-{}\[\]+?.,\\\^$|#\s]/g,/\((.*?)\)/g,/(\(\?)?:\w+/g,/\*\w+/g],c=function(t){return t=t.replace(s[0],"\\$&").replace(s[1],"(?:$1)?").replace(s[2],function(t,e){return e?t:"([^/?]+)"}).replace(s[3],"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},u=function(t,e){var n,i=t.exec(e).slice(1),r=[];for(n=0;n<i.length;n++)r.push(decodeURIComponent(i[n])||null);return r};t.prototype.exec=function(t){for(var e in this.routes){var n=c(e);if(n.test(t))if("function"==typeof this.routes[e])this.routes[e].apply(this,u(n,t));else{var i=this.opts[this.routes[e]];i?i.apply(this,u(n,t)):void 0}}},t.prototype.emmit=function(t){t=r?t.state.path:location.href.split("#")[1]||"",a.exec(t)},t.prototype.start=function(){i.addEventListener?i.addEventListener(o,this.emmit,!1):i.attachEvent("on"+o,this.emmit)},t.prototype.stop=function(){i.removeEventListener?i.removeEventListener(o,this.emmit,!1):i.detachEvent("on"+o,this.emmit)},t.prototype.go=function(t,e){r?e?history.replaceState({path:t},document.title,t):history.pushState({path:t},document.title,t):"/"!==this.sep&&(location.hash=this.sep+t),this.exec(t)},t.prototype.back=function(){history.back()},t.prototype.hold=function(t,e){if(t){var n=e?e:t.srcElement?t.srcElement.pathname:t.target.pathname,i=!1;if(r?n===history.state.path&&(i=!0):n="/"+n,this.go(n,i),t&&t.preventDefault)t.preventDefault();else if("/"!==this.sep)return t.returnValue=!1,!1}},t.prototype.holdLinks=function(t){for(var e=0;e<t.length;e++)t[e].onclick=function(t){a.hold(t)}},"object"==typeof n?e.exports=t:"function"==typeof define&&define.amd?define(function(){return window.MinRouter=t}):window.MinRouter=t}}("undefined"!=typeof window?window:void 0)},{}],21:[function(t,e,n){!function(t,i){"use strict";function r(t){var e=G(0),n=t.trim().slice(e.length).match(/^\s*(\S+?)\s*(?:,\s*(\S+))?\s+in\s+(.+)$/);return n?{key:n[1],pos:n[2],val:e+n[3]}:{val:t}}function o(t,e,n){var i={};return i[t.key]=e,t.pos&&(i[t.pos]=n),i}function a(t,e,n){g(t,"each");var i,a=y(t),s=t.outerHTML,c=!!K[a],l=K[a]||{tmpl:s},p=t.parentNode,f=document.createComment("riot placeholder"),d=[],h=v(t);p.insertBefore(f,t),n=r(n),e.one("premount",function(){p.stub&&(p=e.root),t.parentNode.removeChild(t)}).on("update",function(){var r=J(n.val,e);I(r)||(i=r?JSON.stringify(r):"",r=r?Object.keys(r).map(function(t){return o(n,t,r[t])}):[]);for(var s=document.createDocumentFragment(),g=d.length,v=r.length;g>v;)d[--g].unmount(),d.splice(g,1);for(g=0;v>g;++g){var m=!i&&n.key?o(n,r[g],g):r[g];d[g]?d[g].update(m):((d[g]=new u(l,{parent:e,isLoop:!0,hasImpl:c,root:z.test(a)?p:t.cloneNode(),item:m},t.innerHTML)).mount(),s.appendChild(d[g].root)),d[g]._item=m}p.insertBefore(s,f),h&&(e.tags[a]=d)}).one("updated",function(){var t=Object.keys(e);_(p,function(n){1!=n.nodeType||n.isLoop||n._looped||(n._visited=!1,n._looped=!0,S(n,e,t))})})}function s(t,e,n){_(t,function(t){if(1==t.nodeType){t.isLoop=t.isLoop||t.parentNode&&t.parentNode.isLoop||t.getAttribute("each")?1:0;var i=v(t);i&&!t.isLoop&&n.push(m(i,t,e)),t.isLoop||S(t,e,[])}})}function c(t,e,n){function i(t,e,i){if(e.indexOf(G(0))>=0){var r={dom:t,expr:e};n.push(w(r,i))}}_(t,function(t){var n=t.nodeType;if(3==n&&"STYLE"!=t.parentNode.tagName&&i(t,t.nodeValue),1==n){var r=t.getAttribute("each");return r?(a(t,e,r),!1):(d(t.attributes,function(e){var n=e.name,r=n.split("__")[1];return i(t,e.value,{attr:r||n,bool:r}),r?(g(t,n),!1):void 0}),v(t)?!1:void 0)}})}function u(t,e,n){function r(){var t=y&&m?l:v||l;d(C.attributes,function(e){p[e.name]=J(e.value,t)}),d(Object.keys(N),function(e){p[e]=J(N[e],t)})}function o(t){for(var e in _)typeof l[e]!==F&&(l[e]=t[e])}function a(){l.parent&&m&&d(Object.keys(l.parent),function(t){var e=!~X.indexOf(t)&&~A.indexOf(t);(typeof l[t]===F||e)&&(e||A.push(t),l[t]=l.parent[t])})}function u(t){if(d(j,function(e){e[t?"mount":"unmount"]()}),v){var e=t?"on":"off";m?v[e]("unmount",l.unmount):v[e]("update",l.update)[e]("unmount",l.unmount)}}var l=O.observable(this),p=D(e.opts)||{},g=Y(t.tmpl),v=e.parent,m=e.isLoop,y=e.hasImpl,_=x(e.item),L=[],j=[],C=e.root,S=t.fn,M=C.tagName.toLowerCase(),N={},A=[];S&&C._tag&&C._tag.unmount(!0),this.isMounted=!1,C.isLoop=m,C._tag=this,this._id=H++,w(this,{parent:v,root:C,opts:p,tags:{}},_),d(C.attributes,function(t){var e=t.value;G(/{.*}/).test(e)&&(N[t.name]=e)}),g.innerHTML&&!/^(select|optgroup|table|tbody|tr|col(?:group)?)$/.test(M)&&(g.innerHTML=T(g.innerHTML,n)),this.update=function(t){t=x(t),a(),t&&typeof _===B&&(o(t),_=t),w(l,t),r(),l.trigger("update",t),f(L,l),l.trigger("updated")},this.mixin=function(){d(arguments,function(t){t=typeof t===P?O.mixin(t):t,d(Object.keys(t),function(e){"init"!=e&&(l[e]=h(t[e])?t[e].bind(l):t[e])}),t.init&&t.init.bind(l)()})},this.mount=function(){if(r(),S&&S.call(l,p),c(g,l,L),u(!0),(t.attrs||y)&&(k(t.attrs,function(t,e){C.setAttribute(t,e)}),c(l.root,l,L)),(!l.parent||m)&&l.update(_),l.trigger("premount"),m&&!y)l.root=C=g.firstChild;else{for(;g.firstChild;)C.appendChild(g.firstChild);C.stub&&(l.root=C=v.root)}!l.parent||l.parent.isMounted?(l.isMounted=!0,l.trigger("mount")):l.parent.one("mount",function(){E(l.root)||(l.parent.isMounted=l.isMounted=!0,l.trigger("mount"))})},this.unmount=function(t){var e,n=C,r=n.parentNode;if(r){if(v)e=b(v),I(e.tags[M])?d(e.tags[M],function(t,n){t._id==l._id&&e.tags[M].splice(n,1)}):e.tags[M]=i;else for(;n.firstChild;)n.removeChild(n.firstChild);t?r.removeAttribute("riot-tag"):r.removeChild(n)}l.trigger("unmount"),u(),l.off("*"),C._tag=null},s(g,this,j)}function l(e,n,i,r){i[e]=function(e){var o,a=r._item,s=r.parent;if(!a)for(;s&&!a;)a=s._item,s=s.parent;e=e||t.event;try{e.currentTarget=i,e.target||(e.target=e.srcElement),e.which||(e.which=e.charCode||e.keyCode)}catch(c){}e.item=a,n.call(r,e)===!0||/radio|check/.test(i.type)||(e.preventDefault&&e.preventDefault(),e.returnValue=!1),e.preventUpdate||(o=a?b(s):r,o.update())}}function p(t,e,n){t&&(t.insertBefore(n,e),t.removeChild(e))}function f(t,e){d(t,function(t,n){var i=t.dom,r=t.attr,o=J(t.expr,e),a=t.dom.parentNode;if(t.bool?o=o?r:!1:null==o&&(o=""),a&&"TEXTAREA"==a.tagName&&(o=(""+o).replace(/riot-/g,"")),t.value!==o){if(t.value=o,!r)return void(i.nodeValue=""+o);if(g(i,r),h(o))l(r,o,i,e);else if("if"==r){var s=t.stub,c=function(){p(s.parentNode,s,i)},u=function(){p(i.parentNode,i,s)};o?s&&(c(),i.inStub=!1,E(i)||_(i,function(t){t._tag&&!t._tag.isMounted&&(t._tag.isMounted=!!t._tag.trigger("mount"))})):(s=t.stub=s||document.createTextNode(""),i.parentNode?u():(e.parent||e).one("updated",u),i.inStub=!0)}else if(/^(show|hide)$/.test(r))"hide"==r&&(o=!o),i.style.display=o?"":"none";else if("value"==r)i.value=o;else if(M(r,q)&&r!=R)o&&i.setAttribute(r.slice(q.length),o);else{if(t.bool&&(i[r]=o,!o))return;typeof o!==B&&i.setAttribute(r,o)}}})}function d(t,e){for(var n,i=0,r=(t||[]).length;r>i;i++)n=t[i],null!=n&&e(n,i)===!1&&i--;return t}function h(t){return typeof t===U||!1}function g(t,e){t.removeAttribute(e)}function v(t){return t.tagName&&K[t.getAttribute(R)||t.tagName.toLowerCase()]}function m(t,e,n){var i,r=new u(t,{root:e,parent:n},e.innerHTML),o=y(e),a=b(n);return r.parent=a,i=a.tags[o],i?(I(i)||(a.tags[o]=[i]),~a.tags[o].indexOf(r)||a.tags[o].push(r)):a.tags[o]=r,e.innerHTML="",r}function b(t){for(var e=t;!v(e.root)&&e.parent;)e=e.parent;return e}function y(t){var e=v(t),n=t.getAttribute("name"),i=n&&n.indexOf(G(0))<0?n:e?e.name:t.tagName.toLowerCase();return i}function w(t){for(var e,n=arguments,i=1;i<n.length;++i)if(e=n[i])for(var r in e)t[r]=e[r];return t}function x(t){if(!(t instanceof u||t&&typeof t.trigger==U))return t;var e={};for(var n in t)~X.indexOf(n)||(e[n]=t[n]);return e}function _(t,e){if(t){if(e(t)===!1)return;for(t=t.firstChild;t;)_(t,e),t=t.nextSibling}}function k(t,e){for(var n,i=/([-\w]+) ?= ?(?:"([^"]*)|'([^']*)|({[^}]*}))/g;n=i.exec(t);)e(n[1].toLowerCase(),n[2]||n[3]||n[4])}function E(t){for(;t;){if(t.inStub)return!0;t=t.parentNode}return!1}function L(t){return document.createElement(t)}function T(t,e){return t.replace(/<(yield)\/?>(<\/\1>)?/gi,e||"")}function j(t,e){return(e||document).querySelectorAll(t)}function C(t,e){return(e||document).querySelector(t)}function D(t){function e(){}return e.prototype=t,new e}function S(t,e,n){if(!t._visited){var i,r=t.getAttribute("id")||t.getAttribute("name");r&&(n.indexOf(r)<0&&(i=e[r],i?I(i)?i.push(t):e[r]=[i,t]:e[r]=t),t._visited=!0)}}function M(t,e){return t.slice(0,e.length)===e}function N(t){if(!O.render){V||(V=L("style"),V.setAttribute("type","text/css"));var e=document.head||document.getElementsByTagName("head")[0];if(V.styleSheet?V.styleSheet.cssText+=t:V.innerHTML+=t,!V._rendered)if(V.styleSheet)document.body.appendChild(V);else{var n=C("style[type=riot]");n?(n.parentNode.insertBefore(V,n),n.parentNode.removeChild(n)):e.appendChild(V)}V._rendered=!0}}function A(t,e,n){var i=K[e],r=t._innerHTML=t._innerHTML||t.innerHTML;return t.innerHTML="",i&&t&&(i=new u(i,{root:t,opts:n},r)),i&&i.mount?(i.mount(),Z.push(i),i.on("unmount",function(){Z.splice(Z.indexOf(i),1)})):void 0}var O={version:"v2.2.4",settings:{}},H=0,q="riot-",R=q+"tag",P="string",B="object",F="undefined",U="function",z=/^(?:opt(ion|group)|tbody|col|t[rhd])$/,X=["_item","_id","update","root","mount","unmount","mixin","isMounted","isLoop","tags","parent","opts","trigger","on","off","one"],$=0|(t&&t.document||{}).documentMode,I=Array.isArray;O.observable=function(t){t=t||{};var e={},n=0;return t.on=function(i,r){return h(r)&&(typeof r.id===F&&(r._id=n++),i.replace(/\S+/g,function(t,n){(e[t]=e[t]||[]).push(r),r.typed=n>0})),t},t.off=function(n,i){return"*"==n?e={}:n.replace(/\S+/g,function(t){if(i)for(var n,r=e[t],o=0;n=r&&r[o];++o)n._id==i._id&&r.splice(o--,1);else e[t]=[]}),t},t.one=function(e,n){function i(){t.off(e,i),n.apply(t,arguments)}return t.on(e,i)},t.trigger=function(n){for(var i,r=[].slice.call(arguments,1),o=e[n]||[],a=0;i=o[a];++a)i.busy||(i.busy=1,i.apply(t,i.typed?[n].concat(r):r),o[a]!==i&&a--,i.busy=0);return e.all&&"all"!=n&&t.trigger.apply(t,["all",n].concat(r)),t},t},O.mixin=function(){var t={};return function(e,n){return n?void(t[e]=n):t[e]}}(),function(t,e,n){function i(){return s.href.split("#")[1]||""}function r(t){return t.split("/")}function o(t){t.type&&(t=i()),t!=a&&(c.trigger.apply(null,["H"].concat(r(t))),a=t)}if(n){var a,s=n.location,c=t.observable(),u=!1,l=t.route=function(t){t[0]?(s.hash=t,o(t)):c.on("H",t)};l.exec=function(t){t.apply(null,r(i()))},l.parser=function(t){r=t},l.stop=function(){u&&(n.removeEventListener?n.removeEventListener(e,o,!1):n.detachEvent("on"+e,o),c.off("*"),u=!1)},l.start=function(){u||(n.addEventListener?n.addEventListener(e,o,!1):n.attachEvent("on"+e,o),u=!0)},l.start()}}(O,"hashchange",t);var V,G=function(t){var e,n,i,r=/[{}]/g;return function(o){var a=O.settings.brackets||t;return e!==a&&(e=a,i=a.split(" "),n=i.map(function(t){return t.replace(/(?=.)/g,"\\")})),o instanceof RegExp?a===t?o:new RegExp(o.source.replace(r,function(t){return n[~~("}"===t)]}),o.global?"g":""):i[o]}}("{ }"),J=function(){function e(t,e){return t.indexOf(G(0))<0?(t=t.replace(/\n|\r\n?/g,"\n"),function(){return t}):(t=t.replace(G(/\\{/g),"￰").replace(G(/\\}/g),"￱"),e=r(t,o(t,G(/{/),G(/}/))),t=2!==e.length||e[0]?"["+e.map(function(t,e){return e%2?n(t,!0):'"'+t.replace(/\n|\r\n?/g,"\\n").replace(/"/g,'\\"')+'"'}).join(",")+'].join("")':n(e[1]),new Function("d","return "+t.replace(/\uFFF0/g,G(0)).replace(/\uFFF1/g,G(1))+";"))}function n(t,e){return t=t.replace(/\n|\r\n?/g," ").replace(G(/^[{ ]+|[ }]+$|\/\*.+?\*\//g),""),/^\s*[\w- "']+ *:/.test(t)?"["+o(t,/["' ]*[\w- ]+["' ]*:/,/,(?=["' ]*[\w- ]+["' ]*:)|}|$/).map(function(t){return t.replace(/^[ "']*(.+?)[ "']*: *(.+?),? *$/,function(t,e,n){return n.replace(/[^&|=!><]+/g,i)+'?"'+e+'":"",'})}).join("")+'].join(" ").trim()':i(t,e)}function i(t,e){return t=t.trim(),t?"(function(v){try{v="+t.replace(c,function(t,e,n){return n?'(("'+n+s+n+")":t})+"}catch(e){}return "+(e===!0?'!v&&v!==0?"":v':"v")+"}).call(d)":""}function r(t,e){var n=[];return e.map(function(e,i){i=t.indexOf(e),n.push(t.slice(0,i),e),t=t.slice(i+e.length)}),t&&n.push(t),n}function o(t,e,n){var i,r=0,o=[],a=new RegExp("("+e.source+")|("+n.source+")","g");return t.replace(a,function(e,n,a,s){!r&&n&&(i=s),r+=n?1:-1,r||null==a||o.push(t.slice(i,s+a.length))}),o}var a={},s='"in d?d:'+(t?"window).":"global)."),c=/(['"\/])(?:[^\\]*?|\\.|.)*?\1|\.\w*|\w*:|\b(?:(?:new|typeof|in|instanceof) |(?:this|true|false|null|undefined)\b|function\s*\()|([A-Za-z_$]\w*)/g;return function(t,n){return t&&(a[t]||(a[t]=e(t)))(n)}}(),Y=function(t){function e(e){var o=e&&e.match(/^\s*<([-\w]+)/),a=o&&o[1].toLowerCase(),s=i[a]||r,c=L(s);return c.stub=!0,t&&a&&(o=a.match(z))?n(c,e,a,!!o[1]):c.innerHTML=e,c}function n(t,e,n,i){var o,a=L(r),s=i?"select>":"table>";a.innerHTML="<"+s+e+"</"+s,o=a.getElementsByTagName(n)[0],o&&t.appendChild(o)}var i={tr:"tbody",th:"tr",td:"tr",tbody:"table",col:"colgroup"},r="div";return t=t&&10>t,e}($),Z=[],K={};O.tag=function(t,e,n,i,r){return h(i)&&(r=i,/^[\w\-]+\s?=/.test(n)?(i=n,n=""):i=""),n&&(h(n)?r=n:N(n)),K[t]={name:t,tmpl:e,attrs:i,fn:r},t},O.mount=function(t,e,n){function i(t){var e="";return d(t,function(t){e+=", *["+R+'="'+t.trim()+'"]'}),e}function r(){var t=Object.keys(K);return t+i(t)}function o(t){var i;if(t.tagName){!e||(i=t.getAttribute(R))&&i==e||t.setAttribute(R,e);var r=A(t,e||t.getAttribute(R)||t.tagName.toLowerCase(),n);r&&c.push(r)}else t.length&&d(t,o)}var a,s,c=[];if(typeof e===B&&(n=e,e=0),typeof t===P?("*"===t?t=s=r():t+=i(t.split(",")),a=j(t)):a=t,"*"===e){if(e=s||r(),a.tagName)a=j(e,a);else{var u=[];d(a,function(t){u.push(j(e,t))}),a=u}e=0}return a.tagName?o(a):d(a,o),c},O.update=function(){return d(Z,function(t){t.update()})},O.mountTo=O.mount,O.util={brackets:G,tmpl:J},typeof n===B?e.exports=O:"function"==typeof define&&define.amd?define(function(){return t.riot=O}):t.riot=O}("undefined"!=typeof window?window:void 0)},{}],22:[function(t,e,n){function i(){}function r(t){var e={}.toString.call(t);switch(e){case"[object File]":case"[object Blob]":case"[object FormData]":return!0;default:return!1}}function o(t){return t===Object(t)}function a(t){if(!o(t))return t;var e=[];for(var n in t)null!=t[n]&&e.push(encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e.join("&")}function s(t){for(var e,n,i={},r=t.split("&"),o=0,a=r.length;a>o;++o)n=r[o],e=n.split("="),i[decodeURIComponent(e[0])]=decodeURIComponent(e[1]);return i}function c(t){var e,n,i,r,o=t.split(/\r?\n/),a={};o.pop();for(var s=0,c=o.length;c>s;++s)n=o[s],e=n.indexOf(":"),i=n.slice(0,e).toLowerCase(),r=m(n.slice(e+1)),a[i]=r;return a}function u(t){return t.split(/ *; */).shift()}function l(t){return g(t.split(/ *; */),function(t,e){var n=e.split(/ *= */),i=n.shift(),r=n.shift();return i&&r&&(t[i]=r),t},{})}function p(t,e){e=e||{},this.req=t,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||"undefined"==typeof this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText,this.setStatusProperties(this.xhr.status),this.header=this.headers=c(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this.setHeaderProperties(this.header),this.body="HEAD"!=this.req.method?this.parseBody(this.text?this.text:this.xhr.response):null}function f(t,e){var n=this;h.call(this),this._query=this._query||[],this.method=t,this.url=e,this.header={},this._header={},this.on("end",function(){var t=null,e=null;try{e=new p(n)}catch(i){return t=new Error("Parser is unable to parse the response"),t.parse=!0,t.original=i,n.callback(t)}if(n.emit("response",e),t)return n.callback(t,e);if(e.status>=200&&e.status<300)return n.callback(t,e);var r=new Error(e.statusText||"Unsuccessful HTTP response");r.original=t,r.response=e,r.status=e.status,n.callback(r,e)})}function d(t,e){return"function"==typeof e?new f("GET",t).end(e):1==arguments.length?new f("GET",t):new f(t,e)}var h=t("emitter"),g=t("reduce"),v="undefined"==typeof window?this||self:window;d.getXHR=function(){if(!(!v.XMLHttpRequest||v.location&&"file:"==v.location.protocol&&v.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0");

}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){}return!1};var m="".trim?function(t){return t.trim()}:function(t){return t.replace(/(^\s*|\s*$)/g,"")};d.serializeObject=a,d.parseString=s,d.types={html:"text/html",json:"application/json",xml:"application/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},d.serialize={"application/x-www-form-urlencoded":a,"application/json":JSON.stringify},d.parse={"application/x-www-form-urlencoded":s,"application/json":JSON.parse},p.prototype.get=function(t){return this.header[t.toLowerCase()]},p.prototype.setHeaderProperties=function(t){var e=this.header["content-type"]||"";this.type=u(e);var n=l(e);for(var i in n)this[i]=n[i]},p.prototype.parseBody=function(t){var e=d.parse[this.type];return e&&t&&(t.length||t instanceof Object)?e(t):null},p.prototype.setStatusProperties=function(t){1223===t&&(t=204);var e=t/100|0;this.status=t,this.statusType=e,this.info=1==e,this.ok=2==e,this.clientError=4==e,this.serverError=5==e,this.error=4==e||5==e?this.toError():!1,this.accepted=202==t,this.noContent=204==t,this.badRequest=400==t,this.unauthorized=401==t,this.notAcceptable=406==t,this.notFound=404==t,this.forbidden=403==t},p.prototype.toError=function(){var t=this.req,e=t.method,n=t.url,i="cannot "+e+" "+n+" ("+this.status+")",r=new Error(i);return r.status=this.status,r.method=e,r.url=n,r},d.Response=p,h(f.prototype),f.prototype.use=function(t){return t(this),this},f.prototype.timeout=function(t){return this._timeout=t,this},f.prototype.clearTimeout=function(){return this._timeout=0,clearTimeout(this._timer),this},f.prototype.abort=function(){return this.aborted?void 0:(this.aborted=!0,this.xhr.abort(),this.clearTimeout(),this.emit("abort"),this)},f.prototype.set=function(t,e){if(o(t)){for(var n in t)this.set(n,t[n]);return this}return this._header[t.toLowerCase()]=e,this.header[t]=e,this},f.prototype.unset=function(t){return delete this._header[t.toLowerCase()],delete this.header[t],this},f.prototype.getHeader=function(t){return this._header[t.toLowerCase()]},f.prototype.type=function(t){return this.set("Content-Type",d.types[t]||t),this},f.prototype.accept=function(t){return this.set("Accept",d.types[t]||t),this},f.prototype.auth=function(t,e){var n=btoa(t+":"+e);return this.set("Authorization","Basic "+n),this},f.prototype.query=function(t){return"string"!=typeof t&&(t=a(t)),t&&this._query.push(t),this},f.prototype.field=function(t,e){return this._formData||(this._formData=new v.FormData),this._formData.append(t,e),this},f.prototype.attach=function(t,e,n){return this._formData||(this._formData=new v.FormData),this._formData.append(t,e,n),this},f.prototype.send=function(t){var e=o(t),n=this.getHeader("Content-Type");if(e&&o(this._data))for(var i in t)this._data[i]=t[i];else"string"==typeof t?(n||this.type("form"),n=this.getHeader("Content-Type"),this._data="application/x-www-form-urlencoded"==n?this._data?this._data+"&"+t:t:(this._data||"")+t):this._data=t;return!e||r(t)?this:(n||this.type("json"),this)},f.prototype.callback=function(t,e){var n=this._callback;this.clearTimeout(),n(t,e)},f.prototype.crossDomainError=function(){var t=new Error("Origin is not allowed by Access-Control-Allow-Origin");t.crossDomain=!0,this.callback(t)},f.prototype.timeoutError=function(){var t=this._timeout,e=new Error("timeout of "+t+"ms exceeded");e.timeout=t,this.callback(e)},f.prototype.withCredentials=function(){return this._withCredentials=!0,this},f.prototype.end=function(t){var e=this,n=this.xhr=d.getXHR(),o=this._query.join("&"),a=this._timeout,s=this._formData||this._data;this._callback=t||i,n.onreadystatechange=function(){if(4==n.readyState){var t;try{t=n.status}catch(i){t=0}if(0==t){if(e.timedout)return e.timeoutError();if(e.aborted)return;return e.crossDomainError()}e.emit("end")}};var c=function(t){t.total>0&&(t.percent=t.loaded/t.total*100),e.emit("progress",t)};this.hasListeners("progress")&&(n.onprogress=c);try{n.upload&&this.hasListeners("progress")&&(n.upload.onprogress=c)}catch(u){}if(a&&!this._timer&&(this._timer=setTimeout(function(){e.timedout=!0,e.abort()},a)),o&&(o=d.serializeObject(o),this.url+=~this.url.indexOf("?")?"&"+o:"?"+o),n.open(this.method,this.url,!0),this._withCredentials&&(n.withCredentials=!0),"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof s&&!r(s)){var l=this.getHeader("Content-Type"),p=d.serialize[l?l.split(";")[0]:""];p&&(s=p(s))}for(var f in this.header)null!=this.header[f]&&n.setRequestHeader(f,this.header[f]);return this.emit("request",this),n.send(s),this},f.prototype.then=function(t,e){return this.end(function(n,i){n?e(n):t(i)})},d.Request=f,d.get=function(t,e,n){var i=d("GET",t);return"function"==typeof e&&(n=e,e=null),e&&i.query(e),n&&i.end(n),i},d.head=function(t,e,n){var i=d("HEAD",t);return"function"==typeof e&&(n=e,e=null),e&&i.send(e),n&&i.end(n),i},d.del=function(t,e){var n=d("DELETE",t);return e&&n.end(e),n},d.patch=function(t,e,n){var i=d("PATCH",t);return"function"==typeof e&&(n=e,e=null),e&&i.send(e),n&&i.end(n),i},d.post=function(t,e,n){var i=d("POST",t);return"function"==typeof e&&(n=e,e=null),e&&i.send(e),n&&i.end(n),i},d.put=function(t,e,n){var i=d("PUT",t);return"function"==typeof e&&(n=e,e=null),e&&i.send(e),n&&i.end(n),i},e.exports=d},{emitter:23,reduce:24}],23:[function(t,e,n){function i(t){return t?r(t):void 0}function r(t){for(var e in i.prototype)t[e]=i.prototype[e];return t}e.exports=i,i.prototype.on=i.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks[t]=this._callbacks[t]||[]).push(e),this},i.prototype.once=function(t,e){function n(){i.off(t,n),e.apply(this,arguments)}var i=this;return this._callbacks=this._callbacks||{},n.fn=e,this.on(t,n),this},i.prototype.off=i.prototype.removeListener=i.prototype.removeAllListeners=i.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks[t];if(!n)return this;if(1==arguments.length)return delete this._callbacks[t],this;for(var i,r=0;r<n.length;r++)if(i=n[r],i===e||i.fn===e){n.splice(r,1);break}return this},i.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),n=this._callbacks[t];if(n){n=n.slice(0);for(var i=0,r=n.length;r>i;++i)n[i].apply(this,e)}return this},i.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks[t]||[]},i.prototype.hasListeners=function(t){return!!this.listeners(t).length}},{}],24:[function(t,e,n){e.exports=function(t,e,n){for(var i=0,r=t.length,o=3==arguments.length?n:t[i++];r>i;)o=e.call(null,o,t[i],++i,t);return o}},{}]},{},[9,1,2,3,4,5,6,7,8]);